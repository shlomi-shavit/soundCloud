{"version":3,"sources":["../../process/js/sound-cloud-script.js"],"names":[],"mappings":"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","file":"script.js","sourcesContent":["document.addEventListener('DOMContentLoaded', event => {\n    //console.log(\"ready!\");\n\n    // SoundCloud initialize\n    SC.initialize({\n        client_id: 'EBquMMXE2x5ZxNs9UElOfb4HbvZK95rc'\n    });\n\n    /*---- Variables ----*/\n    let currentSearch,\n        linkedPartitioning = 0,\n        page_size = 6,\n        historyArray = [];\n\n    const search_input = document.getElementById('soundCloudSearch'),\n        search_result_container = document.querySelector('.sound-cloud__search-results'),\n        search_btn = document.querySelector('.sound-cloud__search-btn'),\n        navigation_btns = document.querySelector('.sound-cloud__navigation'),\n        next_btn = document.querySelector('.sound-cloud__navigation--next'),\n        prev_btn = document.querySelector('.sound-cloud__navigation--prev'),\n        iframe_container = document.querySelector('.sound-cloud__iframe-container'),\n        history_btn = document.querySelector('.sound-cloud__history-btn'),\n        clear_history_btn = document.querySelector('.sound-cloud__clear-history-btn'),\n\n        /*---- Functions ----*/\n        // Add class function\n        addClass = (elementName, className) => {\n            elementName.classList.add(className);\n        },\n        // Remove class function\n        removeClass = (elementName, className) => {\n            elementName.classList.remove(className);\n        },\n        // Cleaning html\n        cleanHtml = elem => {\n            elem.innerHTML = '';\n        },\n        // increase / decrease linkedPartitioning, return next / prev results according input field typing.\n        nextPrev = linkedPartitioningPara => {\n            SC.get('/tracks', {\n                q: currentSearch,\n                limit: page_size,\n                linked_partitioning: linkedPartitioningPara,\n                offset: (page_size * linkedPartitioning)\n            }).then(tracks => {\n                getResult(tracks);\n            });\n        },\n        // Print results\n        getResult = data => {\n            if (data) {\n                //console.log('-- Array[' + linkedPartitioning + '] result--', '\\n', data, '\\n', '--------------------');\n                cleanHtml(search_result_container);  // Reset input & iframe div's\n                cleanHtml(iframe_container);  // Reset input & iframe div's\n\n                // Next & Prev buttons, hide & show behavior\n                if (data.next_href) {\n                    addClass(next_btn, 'btn-active');\n                    if (linkedPartitioning > 0) { addClass(prev_btn, 'btn-active') }\n                    else {removeClass(prev_btn, 'btn-active')}\n                }\n                else { removeClass(next_btn, 'btn-active') }\n\n                // Loop over input value result.\n                for (let [index, value] of data.collection.entries()) {\n\n                    // Create DOM <li> & append text\n                    let listResult = document.createElement(\"li\"),\n                        listText = document.createTextNode(value.title);\n                    listResult.appendChild(listText);\n                    search_result_container.appendChild(listResult);\n\n                    /*-------- <li> click event --------*/\n                    listResult.addEventListener('click', () => {\n                        // Embedding track iframe\n                        SC.oEmbed(value.uri, {auto_play: true}).then(function (oEmbed) {\n                            // Adding & removing fadeAnimation class\n                            if (iframe_container.classList.contains('fadeAnimation')) {\n                                removeClass(iframe_container, 'fadeAnimation'); // remove class animation\n                                setTimeout( () => {\n                                    iframe_container.innerHTML = oEmbed.html;\n                                    addClass(iframe_container, 'fadeAnimation');\n                                }, 700);\n                            }\n                            else {\n                                iframe_container.innerHTML = oEmbed.html;\n                                addClass(iframe_container, 'fadeAnimation');\n                            }\n                        });\n                    });\n                }\n            }\n            else {\n                // Reset result div & oEmbed container\n                cleanHtml(search_result_container, iframe_container);\n                removeClass(iframe_container, 'showImg'); // remove class animation\n            }\n        },\n        // Local storage\n        saveDataToLocalStorage = data => {\n            if(data){\n                historyArray = JSON.parse(localStorage.getItem('historyArr')); // Parse the data back into an array\n                // Check if history local storage contain new search value\n                if(!historyArray.includes(data)){\n                    historyArray.length == 5 ? (historyArray.pop(), historyArray.unshift(data)) : (historyArray.unshift(data)); // limit to 5 & unshift the new data onto array\n                }\n\n                localStorage.setItem('historyArr', JSON.stringify(historyArray)); // array to string and store it in localStorage\n                removeClass(history_btn, 'disabled'); // show history btn\n            }else{\n                historyArray.unshift(JSON.parse(localStorage.getItem('historyArr')));\n                if(historyArray[0] == null){\n                    historyArray = [];\n                    localStorage.setItem('historyArr', JSON.stringify(historyArray));\n                }else {\n                    removeClass(history_btn, 'disabled');\n                }\n            }\n        };\n\n    /*-------- History searches initialize --------*/\n    saveDataToLocalStorage();\n\n    // Click & key events\n    /*-------- Search input keys event  --------*/\n    search_input.addEventListener('keyup', (event) => {\n        if(search_input.value != '' && search_input.value !== currentSearch){ // Checking if input vlaue is not empty & equel\n            if (event.keyCode === 13) { search_btn.click() } // 'Enter' key\n            removeClass(search_btn, 'disabled');\n            addClass(navigation_btns, 'disabled');\n        }else{\n            addClass(search_btn, 'disabled');\n            removeClass(navigation_btns, 'disabled');\n        }\n    });\n\n    /*-------- Search btn click event --------*/\n    search_btn.addEventListener('click', () => {\n        linkedPartitioning = 0;\n        SC.get('/tracks', {\n            q: search_input.value,\n            limit: page_size,\n            linked_partitioning: linkedPartitioning,\n        }).then(tracks => {\n            if(search_input.value !== ''){\n                addClass(search_btn, 'disabled');\n                removeClass(navigation_btns, 'disabled');\n                getResult(tracks);\n                currentSearch = search_input.value;\n                // Save to localStorage\n                saveDataToLocalStorage(search_input.value);\n                search_input.value = '';\n                addClass(clear_history_btn, 'disabled');\n            }\n        })\n    });\n\n    /*-------- Next btn click event --------*/\n    next_btn.addEventListener('click', () => {\n        nextPrev(linkedPartitioning++)\n    });\n\n    /*-------- Prev btn click event --------*/\n    prev_btn.addEventListener('click', () => {\n        nextPrev(linkedPartitioning--)\n    });\n\n    /*-------- History btn click event --------*/\n    history_btn.addEventListener('click', (event) => {\n        addClass(navigation_btns, 'disabled');\n        cleanHtml(search_result_container);  // Reset input & iframe div's\n        cleanHtml(iframe_container);  // Reset input & iframe div's\n        removeClass(iframe_container, 'fadeAnimation'); // remove class animation\n\n        let LH_history_length = JSON.parse(localStorage.historyArr);\n\n///////////////////////////////////////////// finish it ///////////////////////////////////////////////////////////////\n        removeClass(clear_history_btn, 'disabled');\n////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n        // Loop over history searches.\n        for (let value of LH_history_length) {\n\n            //Create DOM <li> & append text\n            let listResult = document.createElement(\"li\"),\n                listText = document.createTextNode(value);\n            listResult.appendChild(listText);\n            search_result_container.appendChild(listResult);\n\n            /*-------- <li> click event --------*/\n            listResult.addEventListener('click', (event) => {\n                search_input.value = event.target.innerText;\n                search_btn.click(); //trigger search btn\n            });\n        }\n\n    });\n\n    /*-------- Clear history btn click event --------*/\n    clear_history_btn.addEventListener('click', (event) => {\n        localStorage.clear();\n        addClass(clear_history_btn, 'disabled');\n        addClass(history_btn, 'disabled');\n        cleanHtml(search_result_container);\n    });\n});\n"]}